(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"267e":function(t,r,o){"use strict";var e={special:"专户产品",normal:"普通"},a={releaseNormal:"正常",releaseFail:"发布失败",releaseSuccess:"发布成功"};o.d(r,"b",(function(){return e})),o.d(r,"a",(function(){return a}))},"7b2e":function(t,r,o){"use strict";var e=o("9bf1"),a=o.n(e);a.a},"9bf1":function(t,r,o){},be97:function(t,r,o){"use strict";function e(t,r,o,e,a,c,n,i){var u,s="function"===typeof t?t.options:t;if(r&&(s.render=r,s.staticRenderFns=o,s._compiled=!0),e&&(s.functional=!0),c&&(s._scopeId="data-v-"+c),n?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},s._ssrRegister=u):a&&(u=i?function(){a.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:a),u)if(s.functional){s._injectStyles=u;var d=s.render;s.render=function(t,r){return u.call(r),d(t,r)}}else{var p=s.beforeCreate;s.beforeCreate=p?[].concat(p,u):[u]}return{exports:t,options:s}}o.d(r,"a",(function(){return e}))},e6e2:function(t,r,o){"use strict";o.r(r);var e=function(){var t=this,r=t.$createElement,o=t._self._c||r;return o("div",[o("div",{staticClass:"product-action-bar"},[o("h-button",{attrs:{type:"primary"},on:{click:t.addProduct}},[t._v("新增")])],1),t._v(" "),o("h-table",{attrs:{loading:t.productLoading,columns:t.productColumns,data:t.productList,stripe:""}}),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.pagination.total>0,expression:"pagination.total > 0"}],staticClass:"pagination-wrap"},[o("h-page",t._b({on:{"on-change":t.changePagination}},"h-page",t.pagination,!1))],1),t._v(" "),o("h-msg-box",{attrs:{footerHide:"",escClose:!0,title:t.productFormMsgBoxData.id?"编辑"+t.productFormMsgBoxData.productName:"新增",beforeEscClose:t.productMsgBoxBeforeEscClose},on:{"on-close":t.productMsgBoxClose},model:{value:t.productMsgBoxVisible,callback:function(r){t.productMsgBoxVisible=r},expression:"productMsgBoxVisible"}},[o("h-form",{ref:"productForm",attrs:{model:t.productFormData,rules:t.productRuleValidate,"label-width":80}},[o("h-form-item",{attrs:{label:"产品名称",prop:"productName",required:""}},[o("h-input",{attrs:{placeholder:"请输入产品名称"},model:{value:t.productFormData.productName,callback:function(r){t.$set(t.productFormData,"productName",r)},expression:"productFormData.productName"}})],1),t._v(" "),o("h-form-item",{attrs:{label:"产品类型",prop:"productType",required:"",cols:"2"}},[o("h-radio-group",{model:{value:t.productFormData.productType,callback:function(r){t.$set(t.productFormData,"productType",r)},expression:"productFormData.productType"}},t._l(t.productTypeOrm,(function(r,e){return o("h-radio",{key:e,staticStyle:{"margin-right":"24px"},attrs:{label:e}},[t._v("\n            "+t._s(r)+"\n          ")])})),1)],1),t._v(" "),o("h-form-item",{attrs:{label:"产品状态",prop:"productStatus",required:"",cols:"2"}},[o("h-radio-group",{model:{value:t.productFormData.productStatus,callback:function(r){t.$set(t.productFormData,"productStatus",r)},expression:"productFormData.productStatus"}},t._l(t.productStatusOrm,(function(r,e){return o("h-radio",{key:e,staticStyle:{"margin-right":"24px"},attrs:{label:e}},[t._v("\n            "+t._s(r)+"\n          ")])})),1)],1),t._v(" "),o("h-form-item",{staticStyle:{"text-align":"right"}},[o("h-button",{attrs:{type:"ghost"},on:{click:t.productFormCancel}},[t._v(" 取消 ")]),t._v(" "),o("h-button",{attrs:{type:"ghost"},on:{click:t.productFormReset}},[t._v(" 重置 ")]),t._v(" "),o("h-button",{attrs:{type:"primary"},on:{click:t.productFormOk}},[t._v(" 提交 ")])],1)],1)],1)],1)},a=[],c=o("9523"),n=o.n(c),i=o("b802"),u=o("267e");function s(t,r){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),o.push.apply(o,e)}return o}function d(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?s(Object(o),!0).forEach((function(r){n()(t,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(o,r))}))}return t}var p={data:function(){var t=this;this.timer=null,this.productTypeOrm=u["b"],this.productStatusOrm=u["a"];var r=this.$router,o=this;return{productLoading:!0,productMsgBoxVisible:!1,productFormMsgBoxData:{},productFormData:{},productRuleValidate:{productName:[{required:!0,message:"产品名称不能为空",trigger:"blur"}],productStatus:[{required:!0,message:"请选择产品状态",trigger:"change"}],productType:[{required:!0,message:"请选择产品类型",trigger:"change"}]},productColumns:[{title:"序号",type:"index"},{title:"产品代码",key:"id",render:function(t,r){var o=r.row.id;return t("span",{},o.slice(-10))}},{title:"产品名称",key:"productName"},{title:"产品类型",key:"productType",render:function(r,o){var e=o.row.productType;return r("span",{},t.productTypeOrm[e])}},{title:"产品状态",key:"productStatus",render:function(r,o){var e=o.row.productStatus;return r("span",{},t.productStatusOrm[e])}},{title:"操作",key:"action",fixed:"right",width:200,render:function(t,e){var a=e.row,c=e.row,n=void 0===c?{}:c,i=n.id,u=n.productName;return t("div",[t("h-poptip",{props:{title:"确认删除".concat(u,"?"),confirm:!0,width:200,transfer:!0},on:{"on-ok":function(){o.delProduct(i,u)},"on-cancel":function(){o.$hMessage.info({content:"取消删除".concat(u),durtion:3,closable:!0})}}},[t("Button",{props:{type:"text",size:"small"}},"删除")]),t("Button",{props:{type:"text",size:"small"},on:{click:function(){o.productMsgBoxVisible=!0,o.productFormMsgBoxData=d({},a),o.productFormData=d({},a)}}},"编辑"),t("Button",{props:{type:"text",size:"small"},on:{click:function(){r.push({path:"/product/".concat(i)})}}},"查看")])}}],productList:[],pagination:{current:1,"page-size":2,total:0}}},created:function(){this.getProductList()},methods:{addProduct:function(){this.timer=null,this.productMsgBoxVisible=!0},delProduct:function(t,r){var o=this;i["a"].fetch({method:"post",url:"/api/product/del",data:{id:t}}).then((function(t){1===t.code&&(o.$hMessage.success("删除".concat(r,"成功！")),o.getProductList())})).catch((function(){o.$hMessage.error({content:"删除".concat(r,"失败"),durtion:3,closable:!0})}))},getProductList:function(){var t=this;i["a"].fetch({method:"get",url:"http://127.0.0.1:2022/api/product",data:{current:1,pageSize:10}}).then((function(r){var o=r.code,e=r.data,a=r.pagination;1===o&&(t.productLoading=!1,t.productList=e,t.pagination=d({},a))}))},createProduct:function(){var t=this;i["a"].fetch({method:"post",url:"/api/product/add",data:d({},this.productFormData)}).then((function(r){1===r.code&&(t.getProductList(),t.resetProductFormMsgBoxData(),t.resetProductFormData())}))},updateProduct:function(){var t=this;i["a"].fetch({method:"post",url:"/api/product",data:d({},this.productFormData)}).then((function(r){1===r.code&&(t.getProductList(),t.resetProductFormMsgBoxData(),t.resetProductFormData())}))},productFormOk:function(){var t=this;this.$refs["productForm"].validate((function(r){r?t.productFormData.id?t.updateProduct():t.createProduct():t.$Message.error("表单验证失败!")}))},productFormCancel:function(){this.resetProductFormMsgBoxData(),this.resetProductFormData()},productFormReset:function(){this.resetProductFormData()},productMsgBoxBeforeEscClose:function(){return this.resetProductFormMsgBoxData(),this.resetProductFormData(),ture},productMsgBoxClose:function(){this.resetProductFormMsgBoxData(),this.resetProductFormData()},resetProductFormMsgBoxData:function(){this.productMsgBoxVisible=!1,this.productFormMsgBoxData={}},resetProductFormData:function(){var t=this;this.productFormData={},this.timer=setTimeout((function(){t.$refs["productForm"].resetValidate()}),0)},changePagination:function(t){var r=this;i["a"].fetch({method:"get",url:"/api/product",data:{current:t,pageSize:10}}).then((function(t){var o=t.code,e=t.data,a=t.pagination;1===o&&(r.productLoading=!1,r.productList=e,r.pagination=d({},a))}))}},beforeDestroy:function(){this.timer=null}},l=p,m=(o("7b2e"),o("be97")),h=Object(m["a"])(l,e,a,!1,null,"0ab24257",null);r["default"]=h.exports}}]);